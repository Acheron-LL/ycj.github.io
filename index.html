<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£å¼¦å‹å‡½æ•°y = A sin(wx + Ï†)å›¾è±¡å˜åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            width: 100%;
            max-width: 1600px;
        }
        
        h1 {
            font-size: 2.6rem;
            margin-bottom: 5px;
            background: linear-gradient(90deg, #4cc9f0, #4361ee);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .function-formula {
            font-size: 1.8rem;
            color: #a0a0c0;
            font-weight: 500;
            margin-top: 5px;
        }
        
        .container {
            display: flex;
            flex-wrap: nowrap;
            gap: 25px;
            width: 100%;
            max-width: 1600px;
            justify-content: center;
            align-items: flex-start;
            flex: 1;
        }
        
        .controls-container {
            width: 380px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }
        
        .graph-container {
            flex: 1;
            min-width: 1000px;
            height: 700px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .graph-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .graph-title {
            font-size: 1.4rem;
            color: #4cc9f0;
            display: flex;
            align-items: center;
        }
        
        .graph-title span {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .current-function-box {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 300px;
        }
        
        .current-title {
            font-size: 1.1rem;
            color: #a0a0c0;
            margin-bottom: 5px;
        }
        
        .current-function {
            font-size: 1.7rem;
            color: #f72585;
            font-weight: 600;
            text-align: center;
        }
        
        .control-title {
            font-size: 1.4rem;
            margin-bottom: 5px;
            color: #4cc9f0;
            display: flex;
            align-items: center;
        }
        
        .control-title span {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .slider-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .param-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
        }
        
        .param-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: #f72585;
            min-width: 60px;
            text-align: right;
        }
        
        .range-inputs {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .range-input {
            flex: 1;
        }
        
        .range-input label {
            display: block;
            font-size: 0.85rem;
            color: #a0a0c0;
            margin-bottom: 5px;
        }
        
        .range-input input {
            width: 100%;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
        }
        
        .slider-wrapper {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .slider-label {
            font-weight: 600;
            color: #72efdd;
            font-size: 0.9rem;
            width: 80px;
        }
        
        .slider {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #4cc9f0;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(76, 201, 240, 0.7);
            border: 2px solid #fff;
        }
        
        .slider-controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: #e6e6e6;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: rgba(76, 201, 240, 0.3);
            transform: scale(1.1);
        }
        
        .reset-btn {
            width: auto;
            padding: 10px 25px;
            border-radius: 25px;
            border: none;
            background: rgba(76, 201, 240, 0.1);
            color: #4cc9f0;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .reset-btn:hover {
            background: rgba(76, 201, 240, 0.3);
            transform: scale(1.05);
        }
        
        .graph-area {
            width: 100%;
            height: calc(100% - 70px);
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        canvas {
            display: block;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1600px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .sin-legend { background-color: #4cc9f0; }
        .point-legend { background-color: #ffcc00; }
        .center-legend { background-color: #f72585; }
        .axis-legend { 
            background: repeating-linear-gradient(
                90deg,
                #4aff4a,
                #4aff4a 5px,
                transparent 5px,
                transparent 10px
            );
        }
        
        .author-footer {
            position: absolute;
            bottom: 15px;
            right: 20px;
            color: rgba(160, 160, 192, 0.4);
            font-size: 0.7rem;
            font-family: 'Courier New', monospace;
            text-align: right;
            z-index: 10;
        }
        
        @media (max-width: 1550px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            
            .controls-container, .graph-container {
                width: 95%;
                min-width: unset;
            }
            
            .graph-container {
                height: 600px;
            }
            
            .graph-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .current-function-box {
                width: 100%;
                min-width: unset;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .function-formula {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>æ­£å¼¦å‹å‡½æ•°y = A sin(wx + Ï†)å›¾è±¡å˜åŒ–</h1>

    </div>
    
    <div class="container">
        <div class="controls-container">
            <h2 class="control-title"><span>ğŸ“Š</span> å‚æ•°æ§åˆ¶</h2>
            
            <div class="slider-group">
                <div class="slider-header">
                    <div class="param-name">æŒ¯å¹… A</div>
                    <div class="param-value" id="aValue">1.0</div>
                </div>
                <div class="range-inputs">
                    <div class="range-input">
                        <label>æœ€å°å€¼</label>
                        <input type="number" id="aMin" value="-5" step="0.1">
                    </div>
                    <div class="range-input">
                        <label>æœ€å¤§å€¼</label>
                        <input type="number" id="aMax" value="5" step="0.1">
                    </div>
                </div>
                <div class="slider-wrapper">
                    <span class="slider-label" id="aRangeLabel">-5 â†’ 5</span>
                    <input type="range" class="slider" id="aSlider" min="-5" max="5" step="0.1" value="1.0">
                    <div class="slider-controls">
                        <button class="control-btn" id="aAutoToggle">â¯ï¸</button>
                    </div>
                </div>
            </div>
            
            <div class="slider-group">
                <div class="slider-header">
                    <div class="param-name">è§’é€Ÿåº¦ w</div>
                    <div class="param-value" id="wValue">1.0</div>
                </div>
                <div class="range-inputs">
                    <div class="range-input">
                        <label>æœ€å°å€¼</label>
                        <input type="number" id="wMin" value="0" step="1">
                    </div>
                    <div class="range-input">
                        <label>æœ€å¤§å€¼</label>
                        <input type="number" id="wMax" value="6" step="1">
                    </div>
                </div>
                <div class="slider-wrapper">
                    <span class="slider-label" id="wRangeLabel">0 â†’ 6</span>
                    <input type="range" class="slider" id="wSlider" min="0" max="6" step="1" value="1">
                    <div class="slider-controls">
                        <button class="control-btn" id="wAutoToggle">â¯ï¸</button>
                    </div>
                </div>
            </div>
            
            <div class="slider-group">
                <div class="slider-header">
                    <div class="param-name">åˆç›¸ Ï†</div>
                    <div class="param-value" id="phiValue">0.0</div>
                </div>
                <div class="range-inputs">
                    <div class="range-input">
                        <label>æœ€å°å€¼</label>
                        <input type="number" id="phiMin" value="-10" step="0.1">
                    </div>
                    <div class="range-input">
                        <label>æœ€å¤§å€¼</label>
                        <input type="number" id="phiMax" value="10" step="0.1">
                    </div>
                </div>
                <div class="slider-wrapper">
                    <span class="slider-label" id="phiRangeLabel">-10 â†’ 10</span>
                    <input type="range" class="slider" id="phiSlider" min="-10" max="10" step="0.1" value="0.0">
                    <div class="slider-controls">
                        <button class="control-btn" id="phiAutoToggle">â¯ï¸</button>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: center;">
                <button class="reset-btn" id="resetBtn">é‡ç½®å‚æ•°</button>
            </div>
        </div>
        
        <div class="graph-container">
            <div class="graph-header">
                <h2 class="graph-title"><span>ğŸ“ˆ</span> å‡½æ•°å›¾åƒ</h2>
                <div class="current-function-box">
                   
                    <div class="current-function" id="currentFunction">y = 1.0 sin(1.0x + 0.0)</div>
                </div>
            </div>
            
            <div class="graph-area">
                <canvas id="graphCanvas"></canvas>
            </div>
        </div>
    </div>
    
    <div class="legend">
        <div class="legend-item">
            <div class="legend-color sin-legend"></div>
            <span>æ­£å¼¦å‡½æ•°æ›²çº¿</span>
        </div>
        <div class="legend-item">
            <div class="legend-color point-legend"></div>
            <span>ç‰¹æ®Šç‚¹ (0, A) å’Œ (0, -A)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color center-legend"></div>
            <span>å¯¹ç§°ä¸­å¿ƒ (åŠ ç²—)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color axis-legend"></div>
            <span>å¯¹ç§°è½´ (è™šçº¿)</span>
        </div>
    </div>

    <div class="author-footer">
        Interactive visualization created by ycj<br>
        Powered by DeepSeek AI
    </div>

    <script>
        // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        
        // è·å–æ§åˆ¶å…ƒç´ 
        const aSlider = document.getElementById('aSlider');
        const wSlider = document.getElementById('wSlider');
        const phiSlider = document.getElementById('phiSlider');
        
        // è·å–èŒƒå›´è¾“å…¥å…ƒç´ 
        const aMinInput = document.getElementById('aMin');
        const aMaxInput = document.getElementById('aMax');
        const wMinInput = document.getElementById('wMin');
        const wMaxInput = document.getElementById('wMax');
        const phiMinInput = document.getElementById('phiMin');
        const phiMaxInput = document.getElementById('phiMax');
        
        // è·å–èŒƒå›´æ ‡ç­¾å…ƒç´ 
        const aRangeLabel = document.getElementById('aRangeLabel');
        const wRangeLabel = document.getElementById('wRangeLabel');
        const phiRangeLabel = document.getElementById('phiRangeLabel');
        
        const aValue = document.getElementById('aValue');
        const wValue = document.getElementById('wValue');
        const phiValue = document.getElementById('phiValue');
        
        const aAutoToggle = document.getElementById('aAutoToggle');
        const wAutoToggle = document.getElementById('wAutoToggle');
        const phiAutoToggle = document.getElementById('phiAutoToggle');
        
        const currentFunction = document.getElementById('currentFunction');
        const resetBtn = document.getElementById('resetBtn');
        
        // å‚æ•°çŠ¶æ€
        let params = {
            A: 1.0,
            w: 1.0,
            Ï†: 0.0
        };
        
        // èŒƒå›´é™åˆ¶
        let ranges = {
            A: { min: -5, max: 5 },
            w: { min: 0, max: 6 },
            Ï†: { min: -10, max: 10 }
        };
        
        // è‡ªåŠ¨åŠ¨ç”»çŠ¶æ€
        let autoAnimations = {
            A: { active: false, direction: 1, speed: 0.01 },
            w: { active: false, direction: 1, speed: 0.002 },
            Ï†: { active: false, direction: 1, speed: 0.005 }
        };
        
        // åŠ¨ç”»ID
        let animationId = null;
        
        // éªŒè¯è¾“å…¥å€¼ï¼Œç¡®ä¿ä¸è¶…è¿‡Â±100
        function validateRangeInput(value, paramName) {
            const numValue = parseFloat(value);
            
            if (isNaN(numValue)) {
                return false;
            }
            
            if (Math.abs(numValue) > 100) {
                alert('ä¸èƒ½è¶…è¿‡Â±100å“¦ï¼ŒCiallo ï½(âˆ ãƒ»Ï‰< )âŒ’â˜…!');
                return false;
            }
            
            return true;
        }
        
        // æ›´æ–°æ»‘å—èŒƒå›´
        function updateSliderRange(slider, minInput, maxInput, rangeLabel, paramName, rangesKey) {
            const minValue = parseFloat(minInput.value);
            const maxValue = parseFloat(maxInput.value);
            
            if (!validateRangeInput(minValue, paramName + "æœ€å°å€¼") || !validateRangeInput(maxValue, paramName + "æœ€å¤§å€¼")) {
                // å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ¢å¤åŸæ¥çš„å€¼
                minInput.value = ranges[rangesKey].min;
                maxInput.value = ranges[rangesKey].max;
                return;
            }
            
            if (minValue >= maxValue) {
                return;
            }
            
            // æ›´æ–°èŒƒå›´
            ranges[rangesKey].min = minValue;
            ranges[rangesKey].max = maxValue;
            
            // æ›´æ–°æ»‘å—å±æ€§
            slider.min = minValue;
            slider.max = maxValue;
            
            // ç¡®ä¿å½“å‰å€¼åœ¨æ–°èŒƒå›´å†…
            let currentValue = parseFloat(slider.value);
            if (currentValue < minValue) {
                currentValue = minValue;
                slider.value = currentValue;
                params[rangesKey] = currentValue;
            } else if (currentValue > maxValue) {
                currentValue = maxValue;
                slider.value = currentValue;
                params[rangesKey] = currentValue;
            }
            
            // æ›´æ–°èŒƒå›´æ ‡ç­¾
            rangeLabel.textContent = `${minValue.toFixed(1)} â†’ ${maxValue.toFixed(1)}`;
            
            // æ›´æ–°æ˜¾ç¤º
            updateParamDisplay();
            drawGraph();
        }
        
        // åˆå§‹åŒ–Canvaså°ºå¯¸
        function initCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }
        
        // æ›´æ–°å‚æ•°æ˜¾ç¤º
        function updateParamDisplay() {
            aValue.textContent = params.A.toFixed(1);
            wValue.textContent = params.w.toFixed(1);  // wå€¼ä¿ç•™1ä½å°æ•°
            phiValue.textContent = params.Ï†.toFixed(1);
            
            currentFunction.textContent = `y = ${params.A.toFixed(1)} sin(${params.w.toFixed(1)}x + ${params.Ï†.toFixed(1)})`;
        }
        
        // ç»˜åˆ¶å‡½æ•°å›¾åƒ
        function drawGraph() {
            const width = canvas.width;
            const height = canvas.height;
            
            // è®¡ç®—åæ ‡ç³»å‚æ•°
            const scaleX = width / (4 * Math.PI); // æ˜¾ç¤ºèŒƒå›´ï¼š-2Ï€ åˆ° 2Ï€
            const scaleY = height * 0.2;
            const originX = width / 2;
            const originY = height / 2;
            
            // æ¸…é™¤ç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶ç½‘æ ¼
            drawGrid(ctx, width, height, 40);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.beginPath();
            ctx.moveTo(0, originY);
            ctx.lineTo(width, originY);
            ctx.moveTo(originX, 0);
            ctx.lineTo(originX, height);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.lineWidth = 1.5;
            ctx.stroke();
            
            // æ ‡è®°ç‰¹æ®Šç‚¹å’Œç‰¹æ®Šä½ç½®
            markSpecialPoints(ctx, originX, originY, scaleX, scaleY);
            
            // ç»˜åˆ¶æ­£å¼¦æ›²çº¿
            ctx.beginPath();
            ctx.strokeStyle = '#4cc9f0';
            ctx.lineWidth = 3;
            
            const startX = -2 * Math.PI;
            const endX = 2 * Math.PI;
            
            for (let x = startX; x <= endX; x += 0.01) {
                const y = params.A * Math.sin(params.w * x + params.Ï†);
                const canvasX = originX + x * scaleX;
                const canvasY = originY - y * scaleY;
                
                if (x === startX) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            
            ctx.stroke();
            
            // æ ‡è®°åæ ‡è½´èŒƒå›´
            ctx.fillStyle = '#e6e6e6';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('-2Ï€', originX - 2 * Math.PI * scaleX, originY + 20);
            ctx.fillText('-Ï€', originX - Math.PI * scaleX, originY + 20);
            ctx.fillText('0', originX, originY + 20);
            ctx.fillText('Ï€', originX + Math.PI * scaleX, originY + 20);
            ctx.fillText('2Ï€', originX + 2 * Math.PI * scaleX, originY + 20);
        }
        
        // ç»˜åˆ¶ç½‘æ ¼
        function drawGrid(ctx, width, height, gridSize) {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 0.5;
            
            // ç»˜åˆ¶å‚ç›´çº¿
            for (let x = 0; x <= width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ°´å¹³çº¿
            for (let y = 0; y <= height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }
        
        // æ ‡è®°ç‰¹æ®Šç‚¹ï¼šå¯¹ç§°ä¸­å¿ƒã€å¯¹ç§°è½´ã€(0, A) å’Œ (0, -A)
        function markSpecialPoints(ctx, originX, originY, scaleX, scaleY) {
            const A = params.A;
            const w = params.w;
            const Ï† = params.Ï†;
            
            // 1. æ ‡è®° (0, A) å’Œ (0, -A) ç‚¹ï¼ˆåŠ ç²—ï¼‰
            ctx.fillStyle = '#ffcc00';
            
            // ç‚¹ (0, A)
            const pointAY = originY - A * scaleY;
            ctx.beginPath();
            ctx.arc(originX, pointAY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#ffcc00';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // æ ‡æ³¨æ–‡å­— (0, A)
            ctx.fillStyle = '#ffcc00';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(`(0, ${A.toFixed(1)})`, originX - 10, pointAY - 15);
            
            // ç‚¹ (0, -A)
            const pointMinusAY = originY - (-A) * scaleY;
            ctx.beginPath();
            ctx.arc(originX, pointMinusAY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#ffcc00';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // æ ‡æ³¨æ–‡å­— (0, -A)
            ctx.fillText(`(0, -${A.toFixed(1)})`, originX - 10, pointMinusAY + 25);
            
            // 2. æ ‡è®°å¯¹ç§°ä¸­å¿ƒï¼ˆåŠ ç²—ï¼‰
            // æ­£å¼¦å‡½æ•°çš„å¯¹ç§°ä¸­å¿ƒä¸º (kÏ€ - Ï†)/w
            ctx.fillStyle = '#f72585';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            // è®¡ç®—å¹¶æ ‡è®°ä»¥Ï€/18ä¸ºå•ä½çš„å¯¹ç§°ä¸­å¿ƒ
            for (let k = -4; k <= 4; k++) {
                const centerX = (k * Math.PI - Ï†) / w;
                
                // æ£€æŸ¥æ˜¯å¦åœ¨æ˜¾ç¤ºèŒƒå›´å†…
                if (centerX >= -2 * Math.PI && centerX <= 2 * Math.PI) {
                    const canvasX = originX + centerX * scaleX;
                    
                    // ç»˜åˆ¶å¯¹ç§°ä¸­å¿ƒç‚¹ï¼ˆåŠ ç²—ï¼‰
                    ctx.beginPath();
                    ctx.arc(canvasX, originY, 8, 0, 2 * Math.PI);
                    ctx.fill();
                    ctx.strokeStyle = '#f72585';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // æ ‡æ³¨xåæ ‡ï¼ˆä»¥Ï€/18ä¸ºå•ä½ï¼‰
                    // å°†centerXè½¬æ¢ä¸ºÏ€çš„åˆ†æ•°å½¢å¼
                    const inPiUnits = centerX / Math.PI;
                    
                    // æ£€æŸ¥æ˜¯å¦ä¸ºÏ€/18çš„æ•´æ•°å€
                    const inPi18Units = inPiUnits * 18;
                    if (Math.abs(Math.round(inPi18Units) - inPi18Units) < 0.01) {
                        const numerator = Math.round(inPi18Units);
                        let label = '';
                        
                        if (numerator === 0) {
                            label = '0';
                        } else if (Math.abs(numerator) === 1) {
                            label = numerator === 1 ? 'Ï€/18' : '-Ï€/18';
                        } else if (Math.abs(numerator) === 18) {
                            label = numerator === 18 ? 'Ï€' : '-Ï€';
                        } else if (Math.abs(numerator) === 36) {
                            label = numerator === 36 ? '2Ï€' : '-2Ï€';
                        } else if (numerator % 18 === 0) {
                            label = `${numerator/18}Ï€`;
                        } else {
                            // ç®€åŒ–åˆ†æ•°
                            const gcdVal = gcd(Math.abs(numerator), 18);
                            const simplifiedNum = numerator / gcdVal;
                            const simplifiedDen = 18 / gcdVal;
                            
                            if (simplifiedDen === 1) {
                                label = `${simplifiedNum}Ï€`;
                            } else {
                                label = `${simplifiedNum}Ï€/${simplifiedDen}`;
                            }
                        }
                        
                        ctx.fillStyle = '#f72585';
                        ctx.font = 'bold 12px Arial';
                        ctx.fillText(label, canvasX, originY + 25);
                    }
                }
            }
            
            // 3. æ ‡è®°å¯¹ç§°è½´ï¼ˆè™šçº¿ï¼‰
            // æ­£å¼¦å‡½æ•°çš„å¯¹ç§°è½´ä¸º x = (Ï€/2 + kÏ€ - Ï†)/w
            ctx.strokeStyle = '#4aff4a';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]); // è™šçº¿
            
            // è®¡ç®—å¹¶æ ‡è®°ä»¥Ï€/18ä¸ºå•ä½çš„å¯¹ç§°è½´
            for (let k = -4; k <= 4; k++) {
                const axisX = (Math.PI/2 + k * Math.PI - Ï†) / w;
                
                // æ£€æŸ¥æ˜¯å¦åœ¨æ˜¾ç¤ºèŒƒå›´å†…
                if (axisX >= -2 * Math.PI && axisX <= 2 * Math.PI) {
                    const canvasX = originX + axisX * scaleX;
                    
                    // ç»˜åˆ¶å¯¹ç§°è½´çº¿
                    ctx.beginPath();
                    ctx.moveTo(canvasX, 0);
                    ctx.lineTo(canvasX, canvas.height);
                    ctx.stroke();
                    
                    // æ ‡æ³¨xåæ ‡ï¼ˆä»¥Ï€/18ä¸ºå•ä½ï¼‰
                    // å°†axisXè½¬æ¢ä¸ºÏ€çš„åˆ†æ•°å½¢å¼
                    const inPiUnits = axisX / Math.PI;
                    
                    // æ£€æŸ¥æ˜¯å¦ä¸ºÏ€/18çš„æ•´æ•°å€
                    const inPi18Units = inPiUnits * 18;
                    if (Math.abs(Math.round(inPi18Units) - inPi18Units) < 0.01) {
                        const numerator = Math.round(inPi18Units);
                        let label = '';
                        
                        if (numerator === 0) {
                            label = '0';
                        } else if (Math.abs(numerator) === 1) {
                            label = numerator === 1 ? 'Ï€/18' : '-Ï€/18';
                        } else if (Math.abs(numerator) === 18) {
                            label = numerator === 18 ? 'Ï€' : '-Ï€';
                        } else if (Math.abs(numerator) === 36) {
                            label = numerator === 36 ? '2Ï€' : '-2Ï€';
                        } else if (numerator % 18 === 0) {
                            label = `${numerator/18}Ï€`;
                        } else {
                            // ç®€åŒ–åˆ†æ•°
                            const gcdVal = gcd(Math.abs(numerator), 18);
                            const simplifiedNum = numerator / gcdVal;
                            const simplifiedDen = 18 / gcdVal;
                            
                            if (simplifiedDen === 1) {
                                label = `${simplifiedNum}Ï€`;
                            } else {
                                label = `${simplifiedNum}Ï€/${simplifiedDen}`;
                            }
                        }
                        
                        ctx.fillStyle = '#4aff4a';
                        ctx.font = 'bold 12px Arial';
                        ctx.fillText(label, canvasX, 25);
                    }
                }
            }
            
            ctx.setLineDash([]); // æ¢å¤å®çº¿
        }
        
        // è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆç”¨äºç®€åŒ–åˆ†æ•°ï¼‰
        function gcd(a, b) {
            if (b === 0) return a;
            return gcd(b, a % b);
        }
        
        // æ›´æ–°æ»‘å—å€¼
        function updateSlidersFromParams() {
            aSlider.value = params.A;
            wSlider.value = params.w;
            phiSlider.value = params.Ï†;
        }
        
        // å¤„ç†è‡ªåŠ¨åŠ¨ç”»
        function updateAutoAnimations() {
            // æ›´æ–°Aå‚æ•°
            if (autoAnimations.A.active) {
                params.A += autoAnimations.A.speed * autoAnimations.A.direction;
                
                if (params.A >= ranges.A.max) {
                    params.A = ranges.A.max;
                    autoAnimations.A.direction = -1;
                } else if (params.A <= ranges.A.min) {
                    params.A = ranges.A.min;
                    autoAnimations.A.direction = 1;
                }
                
                aSlider.value = params.A;
            }
            
            // æ›´æ–°wå‚æ•°
            if (autoAnimations.w.active) {
                params.w += autoAnimations.w.speed * autoAnimations.w.direction;
                
                if (params.w >= ranges.w.max) {
                    params.w = ranges.w.max;
                    autoAnimations.w.direction = -1;
                } else if (params.w <= ranges.w.min) {
                    params.w = ranges.w.min;
                    autoAnimations.w.direction = 1;
                }
                
                wSlider.value = params.w;
            }
            
            // æ›´æ–°Ï†å‚æ•°
            if (autoAnimations.Ï†.active) {
                params.Ï† += autoAnimations.Ï†.speed * autoAnimations.Ï†.direction;
                
                if (params.Ï† >= ranges.Ï†.max) {
                    params.Ï† = ranges.Ï†.max;
                    autoAnimations.Ï†.direction = -1;
                } else if (params.Ï† <= ranges.Ï†.min) {
                    params.Ï† = ranges.Ï†.min;
                    autoAnimations.Ï†.direction = 1;
                }
                
                phiSlider.value = params.Ï†;
            }
            
            // æ›´æ–°æ˜¾ç¤º
            updateParamDisplay();
            
            // é‡ç»˜å›¾
            drawGraph();
            
            // ç»§ç»­åŠ¨ç”»
            animationId = requestAnimationFrame(updateAutoAnimations);
        }
        
        // åˆå§‹åŒ–
        function init() {
            // è®¾ç½®Canvaså°ºå¯¸
            initCanvas();
            
            // åˆå§‹ç»˜å›¾
            drawGraph();
            
            // æ›´æ–°å‚æ•°æ˜¾ç¤º
            updateParamDisplay();
            
            // äº‹ä»¶ç›‘å¬ï¼šçª—å£å¤§å°æ”¹å˜
            window.addEventListener('resize', () => {
                initCanvas();
                drawGraph();
            });
            
            // äº‹ä»¶ç›‘å¬ï¼šæ»‘å—å˜åŒ–
            aSlider.addEventListener('input', () => {
                params.A = parseFloat(aSlider.value);
                updateParamDisplay();
                drawGraph();
            });
            
            wSlider.addEventListener('input', () => {
                params.w = parseFloat(wSlider.value);
                updateParamDisplay();
                drawGraph();
            });
            
            phiSlider.addEventListener('input', () => {
                params.Ï† = parseFloat(phiSlider.value);
                updateParamDisplay();
                drawGraph();
            });
            
            // äº‹ä»¶ç›‘å¬ï¼šèŒƒå›´è¾“å…¥å˜åŒ–
            aMinInput.addEventListener('change', () => {
                updateSliderRange(aSlider, aMinInput, aMaxInput, aRangeLabel, "æŒ¯å¹…A", "A");
            });
            
            aMaxInput.addEventListener('change', () => {
                updateSliderRange(aSlider, aMinInput, aMaxInput, aRangeLabel, "æŒ¯å¹…A", "A");
            });
            
            wMinInput.addEventListener('change', () => {
                updateSliderRange(wSlider, wMinInput, wMaxInput, wRangeLabel, "è§’é€Ÿåº¦w", "w");
            });
            
            wMaxInput.addEventListener('change', () => {
                updateSliderRange(wSlider, wMinInput, wMaxInput, wRangeLabel, "è§’é€Ÿåº¦w", "w");
            });
            
            phiMinInput.addEventListener('change', () => {
                updateSliderRange(phiSlider, phiMinInput, phiMaxInput, phiRangeLabel, "åˆç›¸Ï†", "Ï†");
            });
            
            phiMaxInput.addEventListener('change', () => {
                updateSliderRange(phiSlider, phiMinInput, phiMaxInput, phiRangeLabel, "åˆç›¸Ï†", "Ï†");
            });
            
            // äº‹ä»¶ç›‘å¬ï¼šè‡ªåŠ¨åˆ‡æ¢æŒ‰é’®
            aAutoToggle.addEventListener('click', () => {
                autoAnimations.A.active = !autoAnimations.A.active;
                aAutoToggle.textContent = autoAnimations.A.active ? 'â¸ï¸' : 'â¯ï¸';
                aAutoToggle.style.background = autoAnimations.A.active ? 'rgba(76, 201, 240, 0.3)' : '';
                
                if (autoAnimations.A.active && !animationId) {
                    updateAutoAnimations();
                }
            });
            
            wAutoToggle.addEventListener('click', () => {
                autoAnimations.w.active = !autoAnimations.w.active;
                wAutoToggle.textContent = autoAnimations.w.active ? 'â¸ï¸' : 'â¯ï¸';
                wAutoToggle.style.background = autoAnimations.w.active ? 'rgba(76, 201, 240, 0.3)' : '';
                
                if (autoAnimations.w.active && !animationId) {
                    updateAutoAnimations();
                }
            });
            
            phiAutoToggle.addEventListener('click', () => {
                autoAnimations.Ï†.active = !autoAnimations.Ï†.active;
                phiAutoToggle.textContent = autoAnimations.Ï†.active ? 'â¸ï¸' : 'â¯ï¸';
                phiAutoToggle.style.background = autoAnimations.Ï†.active ? 'rgba(76, 201, 240, 0.3)' : '';
                
                if (autoAnimations.Ï†.active && !animationId) {
                    updateAutoAnimations();
                }
            });
            
            // äº‹ä»¶ç›‘å¬ï¼šé‡ç½®æŒ‰é’®
            resetBtn.addEventListener('click', () => {
                params.A = 1.0;
                params.w = 1.0;
                params.Ï† = 0.0;
                
                // æ¢å¤é»˜è®¤èŒƒå›´
                ranges.A = { min: -5, max: 5 };
                ranges.w = { min: 0, max: 6 };
                ranges.Ï† = { min: -10, max: 10 };
                
                // æ›´æ–°èŒƒå›´è¾“å…¥æ¡†
                aMinInput.value = -5;
                aMaxInput.value = 5;
                wMinInput.value = 0;
                wMaxInput.value = 6;
                phiMinInput.value = -10;
                phiMaxInput.value = 10;
                
                // æ›´æ–°èŒƒå›´æ ‡ç­¾
                aRangeLabel.textContent = '-5 â†’ 5';
                wRangeLabel.textContent = '0 â†’ 6';
                phiRangeLabel.textContent = '-10 â†’ 10';
                
                // åœæ­¢æ‰€æœ‰è‡ªåŠ¨åŠ¨ç”»
                autoAnimations.A.active = false;
                autoAnimations.w.active = false;
                autoAnimations.Ï†.active = false;
                
                aAutoToggle.textContent = 'â¯ï¸';
                wAutoToggle.textContent = 'â¯ï¸';
                phiAutoToggle.textContent = 'â¯ï¸';
                
                aAutoToggle.style.background = '';
                wAutoToggle.style.background = '';
                phiAutoToggle.style.background = '';
                
                // åœæ­¢åŠ¨ç”»å¾ªç¯
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                
                updateSlidersFromParams();
                updateParamDisplay();
                drawGraph();
            });
        }
        
        // å¯åŠ¨åº”ç”¨
        init();
    </script>
</body>

</html>
